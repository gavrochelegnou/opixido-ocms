#labels Documentation
= Création d'un nouveau gabarit de page =

== Mise en place ==

=== Création des dossiers et fichiers PHP ===

 * Commencez par vous rendre dans le dossier "plugins" (nomDuProjet/include/plugins) de votre projet

 * Créez-y un dossier, avec pour nom le nom de votre futur plugin(pas d'espace ni de caractère spécial)
 * Créez-y le fichier PHP qui va générer le gabarit. De préférence un nom évocateur comme "genNomDuPlugin".
  # Dans ce fichier, déclarez votre classe ("genNomDuPlugin")
  # *ATTENTION : le fichier PHP générant le gabarit doit porter le même nom que la classe déclarée.*

 * Créez un fichier PHP front.php qui sera automatiquement parcouru. Vous pourrez y déclarer vos classes utiles au fonctionnement du plugin.

 * Créez, toujours dans le même dossier, un dossier qui va contenir le template du gabarit ("tpl" par exemple).
 * Créez dans le dossier "tpl" le template PHP ("nomDuPlugin.php" par exemple)

=== Insertion dans la base de données ===

 * Dans la table "s_gabarit" de votre base de données, créez une nouvelle ligne.

 * Insérez les champs suivants :
  # _ gabarit_titre _ : un titre pour le plugin
  # _ gabarit_classe _ : la classe déclarée dans votre fichier générant le template ("genNomDuPlugin")
  # _ gabarit_plugin _ : le nom du premier dossier créé.

=== Ajouter le gabarit dans une rubrique ===

 * Rendez-vous sur la page d'administration de votre site (monSite/admin)
 * Cliquez sur le lien "Plugins" dans "Dev".
 * Sélectionnez "Ajouter un élément", sélectionnez votre nouveau plugin, puis enregistrez. Cliquez ensuite sur "Installer".
 * Rendez-vous ensuite dans la gestion du contenu et sélectionnez la page où vous souhaitez insérer votre nouveau gabarit.
 * Cliquez sur "Modifer"
 * Dans l'onglet "Paramètres", sélectionnez votre nouveau gabarit (champ "gabarit spécial"), puis enregistrez et validez.


=== La configuration ===

 * Créez dans le dossier de votre plugin le fichier PHP "config.php".
  ( C'est dans ce fichier que vous configurerez l'affichage et la gestion du plugin dans le back-office )
 * 



== Un exemple : Actualités == 

Nous allons voir dans cet exemple comment créer un gabarit simple mais très utile : les actualités.

 === Création de mon dossier et des fichiers ===

 * Commencez par créer un dossier ("actualites" par exemple) dans le dossier des plugins.
 * Ajoutez dans ce dossier créé un fichier PHP nommé "genActualites".
 * Créez-y une classe genActualites héritant de la classe ocmsGen (class genActualites extends ocmsGen {})
  # ...
 * Créez dans le dossier de votre plugin :
  # un fichier "front.php"
  # un fichier "config.php"
  # un dossier "tpl" (contient le template)
  # dans le dossier "tpl", un template "actualites.php"
  # un dossier "forms"
  # dans le dossier "forms", un fichier "actualites.forms.php"



  