#labels Documentation
<h1>Classes</h1>

== Classes ==

=== Headers de page (genHeaders) _(include/global/genHeaders.php)_ ===

*Seulement dans le _init()_ ou _afterinit()_ du gabarit/plugin :*

 * Ajouter un nouveau "niveau" de titre
<code>$this->site->g_headers->addTitle('Sous-titre');</code>

 * Ajouter un fichier CSS (dossier _css/_) : 
<code>$this->site->g_headers->addCss('fichier.css');</code>

 * Ajouter du texte CSS : 
<code>$this->site->g_headers->addCssText('border:none;');</code>

 * Ajouter un fichier Javasript (dossier _js/_) :
<code>$this->site->g_headders->addScript('monScript.js')</code>

 * Ajouter du texte HTML :
<code>$this->site->g_headers->addHtmlHeaders($text);</code>

 * Modifier le titre de la page
<code>$this->site->g_headers->setTitle('Nouveau Titre');</code>

 * Modifier la balise Meta de description :
<code>$this->site->g-headers->setMetaDescription('Nouvelle description');</code>

 * Modifier la balise Meta de mots-clés :
<code>$this->site->g_headers->setMetaKeywords('nouveau, mot, clé');</code>

 * Récupérer le titre de la page, la description, les mots-clés, le HTML du header et les chemins CSS et JS de fichiers :
<code language="php">
$this->site->g_headers->getTitle();
$this->site->g_headers->getMetaDescription();
$this->site->g_headers->getMetaKeywords();
$this->site->g_headers->getHtmlHeaders();
$this->site->g_headers->getCssPath($listeFichiers);
$this->site->g_headers->getJsPath($listeFichiers);</code>


=== Rubrique : genRubrique _(include/global/genRubrique.php)_ ===

 * Récupérer l'Id de la rubrique :
<code>$this->site->g_rubrique->rubrique_id;</code>

 * Récupérer les paragraphes de la rubrique :
<code>$this->site->g_rubrique->getParagraphes();</code>

 * Récupérer le chemin complet et le titre de la rubrique :
<code>$this->site->g_rubrique->getFullTitle();</code>

 * Récupérer toutes les sous-rubriques de la rubrique (ligne de la table _s_rubrique_) :
<code>$this->site->g_rubrique->getSubRubs()</code>

 * Afficher ou masquer les paragraphes de la rubrique :
<code>
$this->site->g_rubrique->showParagraphes=false;
$this->site->g_rubrique->showParagraphes=true;</code>

 * Savoir si le plugin est actif ( retourne true ou false):
<code>$this->site->g_rubrique->isActivePlugin()</code>

 * Savoir si on se trouve sur la rubrique modifiable, ou sur la rubrique en ligne : 
<code>$this->site->g_rubrique->isRealRubrique()</code>

 * Définir si on affiche la boîte lexique, de téléchargement, ou la boite "En savoir plus" :
<code>
$this->site->g_rubrique->showBoxLexique=false;
$this->site->g_rubrique->showBoxDwl=false;
$this->site->g_rubrique->showBoxLinks=false;
</code>

=== Générer un template : genTemplate _(include/global/genTemplate.php)_ ===

Pour savoir comment créer un template dans un gabarit, rendez-vous sur [CreationGabarit#Creation_du_template_de_la_liste_des_actualites cette page]

Commençons par créer un template html/PHP basique _(chemin/Du/Fichier/tpl.php)_
<code language="html">
<div id="monTemplate">

    <h1>@@titre@@</h1>

    <?php echo '<p>'.$this->contenu.'</p>' ?>

    <div id="items">

        <ITEM>

            <div id="@@id@@">@@nom@@</div>

        </ITEM>

    </div>

</div>
</code>

Pour déclarer une variable dans votre template, vous pouvez utiliser <code>@@maVariable@@</code> ou <code><?php echo $this->maVariable ?></code>

Implémentons maintenant notre template

<code>
//Déclaration du template
$tpl = new genTemplate();
//On charge le template html
$tpl->loadTemplate('tpl', 'chemin/Du/Fichier');

//On affecte des valeurs aux variables du template
//Un titre et du contenu par exemple;
$tpl->titre = $this->getTitre();
$tpl->contenu = $this->getDescription();

//On boucle sur les informations
$i=0;
//Si on a des résultats
if($results)
{
  foreach($results as $resultat)
  {
    //On déclare le bloc ITEM
    $item = $tpl->addBlock('ITEM');
    //On affecte les valeurs
    $item->id = $i;
    $item->nom = 'Item n°'.$i;
  }
}
//Sinon on supprime le bloc
else $tpl->delBlock('ITEM');
</code>

Autres opérations possibles :

<code>
//Définir un bloc : ceci évite de devoir le supprimer lorsqu'il n'est pas implémenté
$tpl->defineBlocks('ITEM');
//Remplacer le contenu du bloc
$tpl->remplaceBlock('ITEM', $replace);
//Equivaut à implémenter $tpl->titre
$tpl->setVar('titre', $this->getTitle());
//Savoir si une variable est définie dans le template : return true ou false
$tpl->isDefined('contenu');
</code>

=== Créer un cache : genCache _(include/global/gencache.php)_ ===

Chaque rubrique possède un cache. Vous pouvez aussi créer un cache pour votre application.

<code>
//Déclaration du cache
$cache = new genCache(idDuCache, derniereDateModif);
//Si le cache existe et si le contenu n'a pas été dernièrement modifié
if($cache->cacheExits())
  echo $cache->getCache();
else 
{
  //On récupère le contenu
  $html= doSomething();
  //On le met en cache
  $cache->saveCache($html);
  echo $html;
}
</code>

=== genParagraphes _(include/global/genParagraphes.php)_ ===

Vous pouvez affecter des paragraphes à une table. Vous pouvez par exemple affecter plusieurs paragraphes à une actualité ([CreationGabarit#Creation_du_dossier_et_des_fichiers tutoriel de création sur cette page]).

<code>

</code>