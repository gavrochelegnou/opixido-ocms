= L'ajout d'actions et de pages dans le Back-Office =

== Ajouter une action ==

=== Ajouter une action sur une table ===

Pour ajouter une action *sur une table* :
<code>$_Gconfig['tableActions']['nomTable'][] = 'nomFonction';</code>

=== Ajouter une action sur les lignes d'une table ===


<code>
//Ajoute le lien de l'action/bouton
$_Gconfig['rowActions']['nomTable']['nomAction']= true;
//Ajoute une image pour ce lien/bouton
$admin_trads['src_nomAction']['fr'] = ADMIN_PICTOS_FOLDER."24x24/mimetypes/image.png";
</code>

Le nom de la classe doit obligatoirement commencer par "genAction" et implémenter la classe "ocms_action".

<code>
class genActionNomAction extends ocms_action
{
 //Vérification avant action
 public function checkCondition() {  }

 //Code de l'action
 public function doIt() { }
}
</code>


== Exécuter une action lors d'une modification ==

<code>
$gr_on['beforeDelete']['nomDuChamp'] = 'nomFonction';
$gr_on['insert']['nomDuChamp'] = 'nomFonction';
$gr_on['hideObject']['nomDuChamp'] = 'nomFonction';
$gr_on['showObject']['nomDuChamp'] = 'nomFonction';
$gr_on['recorded']['nomDuChamp'] = 'nomFonction';
$gr_on['fileUploaded']['nomDuChamp'] = 'nomFonction';

$_Gconfig['reloadOnChange'][] = 'nomChamp';
//La fonction doit retourner une chaîne de caractères comportant une condition SQL
$_Gconfig['specialListingWhereFullArbo']['nomTable'] = 'nomFonction';
</code>