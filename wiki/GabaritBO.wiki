#labels Documentation
<h1>Créer la gestion d'un gabarit/plugin dans le back-office</h1>

<h2></h2>



<h2><u>Un exemple : gestion des actualités</u></h2>

<h3>Ajouter les actualités dans le back-office</h3>

 * Ouvrez le fichier de configuration "_config.php_".

 * Déclarez toutes ces variables globales qui nous seront utiles plus tard : 
<code>
global $tabForms,$uploadFields,$_Gconfig,$relinv,$orderFields,$admin_trads, $gs_roles, $rteFields, $relations, $tablerel, $basePath, $admin_trads,$searchField;
</code>

 * Pour ajouter un lien vers la gestion des actualités dans le back-office : 

<code>
$_Gconfig['bigMenus']['Actualités'][] = 'a_actualite';
</code>

 * pour modifier le titre du bouton et ajouter un icône :
<code>
//traduction du texte
$admin_trads["cp_txt_a_actualite"]["fr"] = "Actualités";

//Ajout de l'icône
$tabForms["a_actualite"]["picto"] = ADMIN_PICTOS_FOLDER."32x32/apps/internet-news-reader.png";
</code>

*Important: n'oubliez pas de rajouter le plugin dans le back-office et de l'installer!*

<h2>Afficher la liste des actualités</h2>

 * Cliquez sur le bouton pour afficher la liste des actualités.

 * Pour définir quels champs afficher dans le back-office :

<code>
$tabForms['a_actualite']['titre'] = array('actualite_date', 'actualite_titre', 'actualite_img','actualite_contenu','en_ligne');
//'a_actualite' : nom de la table
//'titre' : pour définir les champs à lister
</code>

<h2>Ajouter le formulaire d'ajout</h2> 

 * Dans le dossier "_forms_", créez, si ce n'est pas déjà fait, un fichier PHP nommé "_actualite.form.php_".(_include/plugins/actualites/forms/actualite.form.php_).
Il contiendra la liste des attributs de la base de données à générer dans le formulaire

 * Faites appel à ce fichier dans le _config.php_ : 

<code>
$tabForms['a_actualite']['pages']['Actualité'] = array('../plugins/actualites/forms/actualite.form.php');
//'a_actualite' : nom de la table
//'pages' : pour définir où se trouve le fichier de formulaire
//'Actualité' : nom pour définir l'onglet (modifiable)
//Le tableau doit contenir le chemin vers notre fichier de formulaire
</code>

 * dans le fichier créé (_actualite.form.php_), générez chaque champ utile comme ceci :

<code>
<?php
//Le CMS reconnaîtra automatiquement la date
$this->gen('actualite_date');
$this->genlg('actualite_titre');
//genlg va servir à générer le contenu multilingue
$this->genlg('actualite_contenu');
$this->gen('actualite_img');
$this->gen('en_ligne');
?>
</code>